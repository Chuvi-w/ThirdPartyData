cmake_minimum_required( VERSION 2.8 )

project(ThirdPartyUtils)
set_property(GLOBAL PROPERTY USE_FOLDERS ON)
set(CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH};${PROJECT_SOURCE_DIR}/cmake/")
include(${CMAKE_CURRENT_LIST_DIR}/ThirdParty/GitUtils/GitUtils.cmake)
include(ThirdPartyMods)
include(ChCommonFuncs)
include(GetPlatformType)

if(WIN32)
	set(ExtLibsRoot "D:/_ExtLibs/")
	set(ZLIB_ROOT "${ExtLibsRoot}/zlib/")	
	set(OPENSSL_ROOT_DIR "${ExtLibsRoot}/OpenSSL/")	
	set(CURL_DIR "${ExtLibsRoot}/Curl/win/lib/cmake/CURL")		
	set(OPENSSL_USE_STATIC_LIBS TRUE)
	set(OPENSSL_MSVC_STATIC_RT TRUE)
endif()

include(FindZLibLib)


find_package(OpenSSL REQUIRED)

function(CheckTargetExist Target)

	if (TARGET ${Target})
		message("CheckTargetExist:${Target} exist")
	else()
		message("CheckTargetExist:${Target} not exist")
	endif()
endfunction()

CheckTargetExist(ZLIB::ZLIB)
CheckTargetExist(OpenSSL::SSL)
CheckTargetExist(OpenSSL::Crypto)

set(SKIP_UPDADE_CImg TRUE)
set(SKIP_UPDADE_GIT_UTILS TRUE)
set(SKIP_UPDADE_GumboParser TRUE)
set(SKIP_UPDADE_GumboQuery TRUE)
set(SKIP_UPDADE_HttpLib TRUE)
set(SKIP_UPDADE_QRCodeGenerator TRUE)
set(SKIP_UPDADE_Quirc TRUE)
set(SKIP_UPDADE_RapidJSON TRUE)
set(SKIP_UPDADE_clip TRUE)
set(SKIP_UPDADE_COTIRE TRUE)
set(SKIP_UPDADE_json_dto TRUE)
set(SKIP_UPDADE_md4c TRUE)
set(SKIP_UPDADE_stb TRUE)
set(SKIP_UPDADE_tigr TRUE)
set(SKIP_UPDADE_UCM TRUE)
set(SKIP_UPDADE_serial TRUE)
set(SKIP_UPDADE_asio TRUE)

#AddThirdPartyMod(clip)
#AddThirdPartyMod(GitUtils)
#AddThirdPartyMod(ucm)
#AddThirdPartyMod(cotire)
#AddThirdPartyMod(CImg)
#AddThirdPartyMod(GumboParser)
#AddThirdPartyMod(GumboQuery)
#AddThirdPartyMod(HttpLib)
#AddThirdPartyMod(QRCodeGenerator)
#AddThirdPartyMod(Quirc)
#AddThirdPartyMod(RapidJSON)
#AddThirdPartyMod(clip)
#AddThirdPartyMod(json_dto)
#AddThirdPartyMod(md4c)
#AddThirdPartyMod(stb)
#AddThirdPartyMod(serial)
#AddThirdPartyMod(tigr)
#AddThirdPartyMod(asio)
ListThirdPartyModsSkipVars()
UpdateThirdPartyMods()



AddSubdirsRecursive(${CMAKE_CURRENT_SOURCE_DIR})
GetTargetsRecursive(CurTargets ${CMAKE_CURRENT_SOURCE_DIR})
SetTargetsIDESubdits(CurTargets)