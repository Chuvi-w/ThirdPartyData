
cmake_minimum_required(VERSION 3.8)
add_library(asio src/asio.cpp)
target_include_directories(asio PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include)
target_compile_definitions(asio PUBLIC ASIO_SEPARATE_COMPILATION)

if (TARGET OpenSSL::SSL AND TARGET OpenSSL::Crypto)
	add_library(asio_ssl src/asio_ssl.cpp)
	target_include_directories(asio_ssl PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include)
	target_link_libraries(asio_ssl OpenSSL::SSL OpenSSL::Crypto)
	target_compile_definitions(asio_ssl PUBLIC ASIO_SEPARATE_COMPILATION)
	if(WIN32)
		target_link_libraries(asio_ssl Crypt32)
	endif()
endif()
